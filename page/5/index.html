<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="bingtel">
<meta property="og:url" content="http://yoursite.com/page/5/index.html">
<meta property="og:site_name" content="bingtel">
<meta property="og:locale">
<meta property="article:author" content="Wang Yibing">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/5/"/>





  <title> bingtel </title>
<meta name="generator" content="Hexo 6.0.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?728a3326befbc818061494f87805db56";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">bingtel</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">木犹如此</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>
<div style='display:none;'>
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1257109371'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1257109371' type='text/javascript'%3E%3C/script%3E"));</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?728a3326befbc818061494f87805db56";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</div>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/sanic%E8%B7%AF%E7%94%B1/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/sanic%E8%B7%AF%E7%94%B1/" itemprop="url">
                  sanic路由
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-10T20:28:44+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sanic/" itemprop="url" rel="index">
                    <span itemprop="name">sanic</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <a href="/2017/07/10/sanic/" title="sanic教程">sanic教程</a>


<h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>路由允许用户为不同的URL终端指定处理器函数。</p>
<p>下面是一个基本的路由样例，其中<code>app</code>是<code>Sanic</code>类的实例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from sanic.response import json</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/&quot;)</span><br><span class="line">async def test(request):</span><br><span class="line">    return json(&#123; &quot;hello&quot;: &quot;world&quot; &#125;)</span><br></pre></td></tr></table></figure>

<p>当<code>http://server.url/</code>被访问的时候，最后的<code>/</code>通过路由被匹配到<code>test</code>函数，该函数返回一个JSON对象。</p>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/07/10/sanic%E8%B7%AF%E7%94%B1/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/sanic%E5%85%A5%E9%97%A8/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/sanic%E5%85%A5%E9%97%A8/" itemprop="url">
                  sanic入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-10T20:27:29+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sanic/" itemprop="url" rel="index">
                    <span itemprop="name">sanic</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <a href="/2017/07/10/sanic/" title="sanic教程">sanic教程</a>

<h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p>开始前，确保你已经安装了pip以及最低3.5的Python版本。Sanic使用了新引入的<code>async/await</code>语法，所以早前的python版本，不能运行。</p>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/07/10/sanic%E5%85%A5%E9%97%A8/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/10/sanic/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/10/sanic/" itemprop="url">
                  sanic
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-07-10T20:22:21+08:00">
                2017-07-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/sanic/" itemprop="url" rel="index">
                    <span itemprop="name">sanic</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Sanic"><a href="#Sanic" class="headerlink" title="Sanic"></a>Sanic</h2><p>Sanic是一款基于Python 3.5+、类Flask框架的Web服务器：为快而生。Sanic的实现基于<a target="_blank" rel="noopener" href="https://github.com/MagicStack">magicstack</a>中的大牛的工作，并收到了<a target="_blank" rel="noopener" href="https://magic.io/blog/uvloop-blazing-fast-python-networking/">该文章</a>的启发。</p>
<p>除了和Flask(的用法)比较像之外， Sanic还支持异步的请求处理器。这意味着，你可以使用来自于Python 3.5的新兴的<code>async/await</code>语法，让你的代码非阻塞、迅速。</p>
<p>Sanic在<a target="_blank" rel="noopener" href="https://github.com/channelcat/sanic/">Github</a>上进行开发，欢迎各路开发者。</p>
<h3 id="Sanic追求简单"><a href="#Sanic追求简单" class="headerlink" title="Sanic追求简单"></a>Sanic追求简单</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from sanic import Sanic</span><br><span class="line">from sanic.response import json</span><br><span class="line"></span><br><span class="line">app = Sanic()</span><br><span class="line"></span><br><span class="line">@app.route(&quot;/&quot;)</span><br><span class="line">async def test(request):</span><br><span class="line">    return json(&#123;&quot;hello&quot;: &quot;world&quot;&#125;)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    app.run(host=&quot;0.0.0.0&quot;, port=8000)</span><br></pre></td></tr></table></figure>

<h3 id="指南-未完待续"><a href="#指南-未完待续" class="headerlink" title="指南(未完待续)"></a>指南(未完待续)</h3><ul>
<li><a href="/2017/07/10/sanic%E5%85%A5%E9%97%A8/" title="入门">入门</a></li>
<li><a href="/2017/07/10/sanic%E8%B7%AF%E7%94%B1/" title="路由">路由</a></li>
<li><a href="/2017/07/11/sanic%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE/" title="请求数据">请求数据</a></li>
<li><a href="/2017/07/15/sanic%E5%93%8D%E5%BA%94/" title="响应">响应</a></li>
<li><a href="/2017/07/15/sanic%E9%9D%99%E6%80%81%E6%96%87%E4%BB%B6/" title="静态文件">静态文件</a></li>
<li><a href="/2017/07/16/sanic%E5%BC%82%E5%B8%B8/" title="异常">异常</a></li>
<li><a href="/2017/07/16/sanic%E4%B8%AD%E9%97%B4%E4%BB%B6%E5%92%8C%E7%9B%91%E5%90%AC%E5%99%A8/" title="中间件和监听器">中间件和监听器</a></li>
<li><a href="/2017/07/16/sanic%E8%93%9D%E5%9B%BE/" title="蓝图">蓝图</a></li>
<li><a href="/2017/07/16/sanic%E9%85%8D%E7%BD%AE/" title="配置">配置</a></li>
<li><a href="/2017/07/16/sanicCookies/" title="Cookies">Cookies</a></li>
<li><a href="/2017/07/16/sanic%E6%B5%81/" title="流">流</a></li>
<li><a href="/2017/07/16/sanic%E5%9F%BA%E4%BA%8E%E7%B1%BB%E7%9A%84%E8%A7%86%E5%9B%BE/" title="基于类的视图">基于类的视图</a></li>
<li><a href="/2017/07/16/sanic%E5%AE%9A%E5%88%B6%E5%8D%8F%E8%AE%AE/" title="定制协议">定制协议</a></li>
<li><a href="/2017/07/16/sanicSSL%E4%BE%8B%E5%AD%90/" title="SSL例子">SSL例子</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/01/gunicorn%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E7%9A%84%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/05/01/gunicorn%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E7%9A%84%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B/" itemprop="url">
                  gunicorn对HTTP请求的解析过程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-05-01T10:19:31+08:00">
                2017-05-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/gunicorn/" itemprop="url" rel="index">
                    <span itemprop="name">gunicorn</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>gunicorn作为HTTP Server, 会将用户的HTTP请求解析出request对象之后，再交给应用对象处理的，下面举例介绍一下HTTP请求的解析过程。</p>
<p>假设gunicorn已经启动，接口如下：</p>
<pre><code>http://localhost:8000 
</code></pre>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/05/01/gunicorn%E5%AF%B9HTTP%E8%AF%B7%E6%B1%82%E7%9A%84%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/31/supervisor%E6%90%AD%E9%85%8Dvirtual%E6%9D%A5%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/31/supervisor%E6%90%AD%E9%85%8Dvirtual%E6%9D%A5%E7%AE%A1%E7%90%86%E8%BF%9B%E7%A8%8B/" itemprop="url">
                  supervisor搭配virtual来管理进程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-31T20:40:17+08:00">
                2017-03-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p>一个项目中，可能以来多个进程服务；如果为每个服务单独地写个脚本来进行启动、关闭、重启等操作，会比较麻烦；重要的是，进程异常关闭了，如何让它们自动重启？</p>
<p>答案是：</p>
<pre><code>使用supervisor
</code></pre>
<p>关于supervisor的使用，网上已有很多的说明，但是往往这么说：</p>
<pre><code>1. 使用sudo apt install supervisor
2. blabla
</code></pre>
<p>问题就来了：</p>
<pre><code>在操作系统层面安装supervisor，会：
1. 污染操作系统
2. 影响项目的可移植性
</code></pre>
<p>然而，幸好有</p>
<pre><code>virtualvenv
</code></pre>
<p>下面以superior管理gunicorn为例，介绍一下<code>virtualvenv + supervisor</code>如何管理应用进程。</p>
<h2 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h2><p>我的flask项目的路径在：</p>
<pre><code>/home/cc/test/
</code></pre>
<p>路径如下：</p>
<pre><code>test
     |----app
            |----__init__.py   # 定义了flask应用对象,app
     |----venv   # 虚拟环境
     |-----logs    # 日志目录

/home/cc/app/logs
</code></pre>
<h2 id="supervisor的安装"><a href="#supervisor的安装" class="headerlink" title="supervisor的安装"></a>supervisor的安装</h2><p>激活虚拟环境，</p>
<pre><code>source venv/bin/activate
</code></pre>
<p>然后：</p>
<pre><code>pip install supervisor
echo_supervisord_conf &gt; supervisor.conf
vim supervisor.conf 
</code></pre>
<h2 id="添加gunicorn的管理"><a href="#添加gunicorn的管理" class="headerlink" title="添加gunicorn的管理"></a>添加gunicorn的管理</h2><p>在<code>supervisor.conf</code>末尾，</p>
<pre><code>[program:gunicorn]
command=/home/cc/test/venv/bin/gunicorn -w4 -b 0.0.0.0:5000 app:app    ; supervisor启动命令
directory=/home/cc/test                                                ; 项目的文件夹路径
startsecs=0                                                             ; 启动时间
stopwaitsecs=0                                                          ; 终止等待时间
autostart=true                                                         ; 是否自动启动
autorestart=true                                                        ; 是否自动重启
stdout_logfile=/home/cc/logs/gunicorn.log                          ; log 日志
stderr_logfile=/home/cc/logs/gunicorn.err                          ; 错误日志
</code></pre>
<h2 id="supervisor命令"><a href="#supervisor命令" class="headerlink" title="supervisor命令"></a>supervisor命令</h2><p>当前在<code>test/</code>目录下</p>
<pre><code>supervisord -c supervisor.conf                             通过配置文件启动supervisor
supervisorctl -c supervisor.conf status                    察看supervisor的状态
supervisorctl -c supervisor.conf reload                    重新载入 配置文件
supervisorctl -c supervisor.conf start [all]|[appname]     启动指定/所有 supervisor管理的程序进程
supervisorctl -c supervisor.conf stop [all]|[appname]      关闭指定/所有 supervisor管理的程序进程
</code></pre>
<p>上面的<code>[appname]</code>指的是：</p>
<pre><code>[program:xxx]， 比如gunicorn
</code></pre>
<p>如果执行：</p>
<pre><code>supervisord -c supervisor.conf
</code></pre>
<p>时， 碰到了：</p>
<pre><code>Error: Another program is already listening on a port that one of our HTTP servers is configured to use. 
Shut this program down first before starting supervisord.
For help, use /home/bing/app/venv/bin/supervisord -h
</code></pre>
<p>可以执行：</p>
<pre><code>sudo unlink /tmp/supervisor.sock
</code></pre>
<p>或者：</p>
<pre><code>sudo unlink /var/run/supervisor.sock
</code></pre>
<p>来解决， 这个主要看<code>supervisor.conf</code>中<code>[unix_http_server]</code>的配置：</p>
<pre><code>file=/tmp/supervisor.sock   ; (the path to the socket file)
</code></pre>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a target="_blank" rel="noopener" href="http://www.jianshu.com/p/be9dd421fb8d">python web 部署：nginx + gunicorn + supervisor + flask 部署笔记</a><br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007759636">fabric+supervisor+nginx+gunicorn配置实战</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/31/496-Next-Greater-Element-I/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/31/496-Next-Greater-Element-I/" itemprop="url">
                  496. Next Greater Element I
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-31T20:29:11+08:00">
                2017-03-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>题目原题：</p>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/next-greater-element-i/#/description">496. Next Greater Element I</a></p>
<h3 id="思路一"><a href="#思路一" class="headerlink" title="思路一"></a>思路一</h3><pre><code>先遍历nums，保存元素v和对应的位置i；然后遍历findNums，对于元素v，就在i～len(nums)之间，查找符合条件的值。
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def nextGreaterElement(self, findNums, nums):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type findNums: List[int]</span><br><span class="line">        :type nums: List[int]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        h = &#123;&#125;</span><br><span class="line">        for i, v in enumerate(nums):</span><br><span class="line">            h[v] = i</span><br><span class="line">        return [self._find(nums, h[n], n) for n in findNums]</span><br><span class="line">            </span><br><span class="line">        </span><br><span class="line">    def _find(self, nums, index, target):</span><br><span class="line">        if index &lt; 0 or index &gt;= len(nums):</span><br><span class="line">            return -1</span><br><span class="line">        for i, v in enumerate(nums[index:]):</span><br><span class="line">            if v &gt; target:</span><br><span class="line">                return v</span><br><span class="line">        else:</span><br><span class="line">            return -1</span><br></pre></td></tr></table></figure>
<h3 id="思路二"><a href="#思路二" class="headerlink" title="思路二"></a>思路二</h3><p>思路一最坏是O(N*2), 还可以继续优化：</p>
<pre><code>使用栈
</code></pre>
<p>在遍历nums的时候，就找出大于元素i的右边第一个元素， 并保存起来。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def nextGreaterElement(self, findNums, nums):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type findNums: List[int]</span><br><span class="line">        :type nums: List[int]</span><br><span class="line">        :rtype: List[int]</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        h = &#123;&#125;</span><br><span class="line">        l = []</span><br><span class="line">        i = 0</span><br><span class="line">        nl = len(nums)</span><br><span class="line">        while i &lt; nl:</span><br><span class="line">            if not l or l[-1] &gt; nums[i]:</span><br><span class="line">                l.append(nums[i])</span><br><span class="line">                i += 1</span><br><span class="line">            else:</span><br><span class="line">                h[l[-1]] = nums[i]</span><br><span class="line">                l.pop(-1)</span><br><span class="line">        return [h.get(n, -1) for n in findNums]</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/27/448-Find-All-Numbers-Disappeared-in-an-Array/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/27/448-Find-All-Numbers-Disappeared-in-an-Array/" itemprop="url">
                  448. Find All Numbers Disappeared in an Array
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-27T21:43:55+08:00">
                2017-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="448-Find-All-Numbers-Disappeared-in-an-Array"><a href="#448-Find-All-Numbers-Disappeared-in-an-Array" class="headerlink" title="448. Find All Numbers Disappeared in an Array"></a>448. Find All Numbers Disappeared in an Array</h3><pre><code>Given an array of integers where 1 ≤ a[i] ≤ n (n = size of array), some elements appear twice and others appear once.

Find all the elements of [1, n] inclusive that do not appear in this array.

Could you do it without extra space and in O(n) runtime? You may assume the returned list does not count as extra space.

Example:

Input:
[4,3,2,7,8,2,3,1]

Output:
[5,6]
</code></pre>
<p>意思就是从一组1 ≤ a[i] ≤ n的数组中，找到缺失的数</p>
<h3 id="解题思路："><a href="#解题思路：" class="headerlink" title="解题思路："></a>解题思路：</h3><p>同 <a href="/2017/03/27/442-Find-All-Duplicates-in-an-Array/" title="442. Find All Duplicates in an Array">442. Find All Duplicates in an Array</a>.</p>
<h3 id="源码如下："><a href="#源码如下：" class="headerlink" title="源码如下："></a>源码如下：</h3><pre><code>class Solution(object):
    def findDisappearedNumbers(self, nums):
    &quot;&quot;&quot;
    :type nums: List[int]
    :rtype: List[int]
    &quot;&quot;&quot;
    for num in nums:
        index = abs(num) - 1
        if nums[index] &gt; 0:
            nums[index] *= -1
    return [i+1 for i, v in enumerate(nums) if v &gt; 0]
</code></pre>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/27/442-Find-All-Duplicates-in-an-Array/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/27/442-Find-All-Duplicates-in-an-Array/" itemprop="url">
                  442. Find All Duplicates in an Array
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-27T21:31:14+08:00">
                2017-03-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="442-Find-All-Duplicates-in-an-Array-题目"><a href="#442-Find-All-Duplicates-in-an-Array-题目" class="headerlink" title="442. Find All Duplicates in an Array  题目"></a>442. Find All Duplicates in an Array  题目</h3><pre><code>Given an array of integers, 1 ≤ a[i] ≤ n (n = size of array), some
elements appear twice and others appear once.
Find all the elements that appear twice in this array.
Could you do it without extra space and in O(n) runtime?
Example:

Input:
[4,3,2,7,8,2,3,1]

Output:
[2,3]
</code></pre>
<p>解题思路：</p>
<pre><code>好久没刷题了， 差点做不出来:(

题目要求比较苛刻：不使用额外的空间、在O(N)时间内找到重复的数……
由于1 ≤ a[i] ≤ n ，所以在遍历数组的时候， 标记对应位置的数，表明这个数已经被访问过了，下次又被访问到的时候，就是个重复的数了。
</code></pre>
<p>源码如下：</p>
<pre><code>class Solution(object):
    def findDuplicates(self, nums):
    &quot;&quot;&quot;
    :type nums: List[int]
    :rtype: List[int]
    &quot;&quot;&quot;
    res = []
    for num in nums:
        index = abs(num) -1  # 一定是abs()
        if nums[index] &gt; 0:
            nums[index] *= -1  # 标记为负数,方式访问过了
        else:
            res.append(abs(num))  # 重复出现了
    return res
</code></pre>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/11/leetcode-3-Longest-Substring-Without-Repeating-Characters/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/11/leetcode-3-Longest-Substring-Without-Repeating-Characters/" itemprop="url">
                  leetcode-3-Longest Substring Without Repeating Characters
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-11T21:52:54+08:00">
                2017-03-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>题目出自： <a target="_blank" rel="noopener" href="https://leetcode.com/problems/longest-substring-without-repeating-characters/?tab=Description">3. Longest Substring Without Repeating Characters</a></p>
<p>源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Solution(object):</span><br><span class="line">    def lengthOfLongestSubstring(self, s):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        :type s: str</span><br><span class="line">        :rtype: int</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if not s:</span><br><span class="line">            return 0</span><br><span class="line">        pos = &#123;&#125;</span><br><span class="line">        max_len = 0</span><br><span class="line">        start = 0</span><br><span class="line">        # start ~ index-1 一定是不重复的</span><br><span class="line">        for index, e in enumerate(s):</span><br><span class="line">            if e not in pos or pos[e] &lt; start:</span><br><span class="line">                pos[e] = index</span><br><span class="line">            else:</span><br><span class="line">                max_len = max(index-start, max_len)  # 当前不重复的长度: index-1-(start-1)</span><br><span class="line">                start = pos[e] + 1</span><br><span class="line">                pos[e] = index</span><br><span class="line">        max_len = max(index-start+1, max_len)  # 当前不重复的长度 index - (start-1)</span><br><span class="line">        return max_len</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/10/python-web%E5%AF%BC%E5%87%BA%E6%9C%89%E6%8E%92%E7%89%88%E8%A6%81%E6%B1%82%E7%9A%84pdf/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="bingtel">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="bingtel" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/10/python-web%E5%AF%BC%E5%87%BA%E6%9C%89%E6%8E%92%E7%89%88%E8%A6%81%E6%B1%82%E7%9A%84pdf/" itemprop="url">
                  python web导出有排版要求的pdf
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-10T18:33:59+08:00">
                2017-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p>项目开发中，经常碰到：</p>
<pre><code>将数据从数据库中导出，生成excel/pdf等格式的文件
</code></pre>
<p>生成excel比较简单，有：</p>
<pre><code>tablib
xlwt(可以实现复杂的功能，如合并单元格、设置单元格样式)
</code></pre>
<p>等库可以实现。</p>
<p>生成pdf也简单，但难的是：</p>
<pre><code>生成有排版格式要求的pdf
</code></pre>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>html很容易去做排版，那么要<code>生成有排版格式要求的pdf</code>, 只要：</p>
<pre><code>1. 从数据库中获取数据
2. 使用定义好的html模板，用数据去填充页面，获得html字符串
3. 把html字符串转为pdf
</code></pre>
<p>关于第二点，可以使用页面渲染引擎去做，java里面可以使用：</p>
<pre><code>beetle
freemarker
velocity
</code></pre>
<p>等引擎。python中可以使用<br>    jinja2<br>    Miko</p>
<p>等， 本文使用<code>jinja2</code>。</p>
<p>关于第三点，本文使用<code>xhtml2pdf</code>库。（本文的例子基于Python 2.7、flask的框架）</p>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/03/10/python-web%E5%AF%BC%E5%87%BA%E6%9C%89%E6%8E%92%E7%89%88%E8%A6%81%E6%B1%82%E7%9A%84pdf/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/6/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="" />
          <p class="site-author-name" itemprop="name"></p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">105</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">142</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wang Yibing</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" target="_blank" rel="noopener" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	




  
  

  

  

  

  


</body>
</html>
